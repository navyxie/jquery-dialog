var UA,isIE6,noop=function(){},NAVY=NAVY||{};NAVY.console=window.console||{log:noop,dir:noop},NAVY.UTIL=NAVY.UTIL||{},NAVY.UTIL.Style=NAVY.UTIL.Style||{},UA=NAVY.UTIL.UA(),isIE6=UA[0]==="msie"&&UA[1]==="6.0",NAVY.UTIL.Style.getMaxZIndex=function(){var e=document.getElementsByTagName("*"),t=e.length,n=0,r=1;for(;n<t;n++)r=Math.max(r,e[n].style.zIndex||0);return r},NAVY.UTIL.Style.setMaxZIndex=function(e){e.style.zIndex=1+NAVY.UTIL.Style.getMaxZIndex()},NAVY.Dialog=function(e,t){var n={title:"\u6e29\u99a8\u63d0\u793a",isShowTiTle:!0,closeText:"X",closeCbf:noop,isShowCloseBtn:!0,isMask:!0,isClickMaskCloseDialog:!1,clickMaskCbf:noop,sureBtnText:"\u786e\u5b9a",sureBtnCbf:noop,isShowSureBtn:!0,cancelBtnText:"\u53d6\u6d88",cancelBtnCbf:noop,isShowCancelBtn:!0,target:"body",dialogWidth:null,dialogHeight:null,marginLeft:null,marginTop:null,dialogClass:"",position:"fixed",autoCloseSecond:0,knowBtnCbf:noop,isDrag:!0};this.contentHtml=e||"\u8bf7\u586b\u5145\u5bf9\u8bdd\u6846\u5185\u5bb9",$.extend(n,t),this.options=n,this.targetObj=$(this.options.target),this.bodyObj=$("body"),this.documentObj=$(document),this.windowObj=$(window),this.init()},NAVY.Dialog.prototype={init:function(){return this.showDialog(),this.initEvent(),this},initEvent:function(){var e,t,n,r,i,s,o=this,u=o.options,a=o.dialogObj,f=a.find(".navyDialogTitleContainer").find(".closeDialogBtn");return u.isMask&&this.bodyObj.find(".navyMaskWrapper").click(function(){u.isClickMaskCloseDialog&&o.closeDialog(),u.clickMaskCbf()}),a.on("click",".navyDialogBtnClick",function(){var e=$(this);e.hasClass("closeDialogBtn")?(o.closeDialog(),u.closeCbf()):e.hasClass("navySureBtn")?u.sureBtnCbf.apply(o,arguments):e.hasClass("navyCancelBtn")?(o.closeDialog(),u.cancelBtnCbf.apply(o,arguments)):e.hasClass("navyDialogTipKnowBtn")&&(o.closeDialog(),u.knowBtnCbf.apply(o,arguments))}),e=u.autoCloseSecond,e!==0&&(f.length&&(f.html('<span class="leftSecond">'+e+"</span>\u79d2\u540e\u5173\u95ed"),t=f.find(".leftSecond")[0],NAVY.UTIL.Date.countDown(t,e)),n=setTimeout(function(){o.closeDialog(),n&&clearTimeout(n)},e*1e3)),u.isDrag&&(r=!1,i={x:0,y:0},s={left:0,top:0},a.find(".navyDialogTitleContainer").css("cursor","move").mousedown(function(e){return r=!0,NAVY.UTIL.Style.setMaxZIndex(a[0]),i.x=e.pageX,i.y=e.pageY,s.left=a.position().left,s.top=a.position().top,!1}),$(document).on("mouseup mousemove",function(e){var t,n,u,f,l;switch(e.type){case"mouseup":return r=!1,!1;case"mousemove":if(r){t={x:e.pageX,y:e.pageY},n=t.x-i.x,u=t.y-i.y;if(n%2===0||u%2===0)f=s.left+n,l=s.top+u,isIE6||(l-=o.windowObj.scrollTop()),f=f<=0?0:f,l=l<=0?0:l,a.css({left:f,top:l})}return!1}})),this},showDialog:function(){var e,t,n,r,i,s,o,u,a,f,l,c,h,p,d,v,m,g,y=NAVY.UTIL.Style,b=y.getMaxZIndex(),w=this,E=w.options,S="";E.position!=="fixed"&&(S="position:absolute"),e=['<div style="z-index: '+(2+b)+";"+S+'" class="navyDialogWrapper '+E.dialogClass+'"><table class="navyDialogTable"><tr><td>'],E.isShowTiTle?E.isShowCloseBtn?e.push('<h2 class="navyDialogTitleContainer relative"><a href="javascript:;" class="navyDialogBtnClick closeDialogBtn floatRight">'+E.closeText+'</a><span class="dialogTitle">'+E.title+"</span></h2>"):e.push('<h2 class="navyDialogTitleContainer relative"><span class="dialogTitle textAlignCenter">'+E.title+"</span></h2>"):E.isShowCloseBtn&&e.push('<h2 class="navyDialogTitleContainer relative"><a href="javascript:;" class="navyDialogBtnClick closeDialogBtn floatRight">'+E.closeText+"</a></h2>"),e.push('<div class="navyDialogContentContainer"><div class="navyDialogContent">'+w.contentHtml+"</div></div>"),E.isShowSureBtn?E.isShowCancelBtn?e.push('<div class="navyDialogBtnContainer"><div class="navyDialogBtnContent"><a href="javascript:;" class="navyDialogBtn navyDialogBtnClick navySureBtn">'+E.sureBtnText+'</a><a href="javascript:;" class="navyDialogBtn navyDialogBtnClick navyCancelBtn">'+E.cancelBtnText+"</a></div></div>"):e.push('<div class="navyDialogBtnContainer"><div class="navyDialogBtnContent"><a href="javascript:;" class="navyDialogBtn navyDialogBtnClick navySureBtn marginCenter">'+E.sureBtnText+"</a></div></div>"):E.isShowCancelBtn&&e.push('<div class="navyDialogBtnContainer"><div class="navyDialogBtnContent"><a href="javascript:;" class="navyDialogBtn navyDialogBtnClick navyCancelBtn marginCenter">'+E.cancelBtnText+"</a></div></div>"),e.push("</td></tr></table></div>"),w.dialogObj=$(e.join("")).appendTo(E.target),t=w.dialogObj,n=E.dialogWidth||t.outerWidth(),r=E.dialogHeight||t.outerHeight(),n=n<80?80:n,i=n/2,s=r/2,o=E.marginLeft,u=E.marginTop,navigator.userAgent.toLowerCase().indexOf("mobile")!==-1?(a=w.windowObj.height(),f=w.documentObj.height(),a=Math.max(a,f),u=w.documentObj.scrollTop()+80,t.css({width:n,height:r,marginLeft:-i,marginTop:u,top:0,overflow:"hidden",position:"absolute"}).find(".navyDialogTable").css({width:n,height:r})):o!==null?u!==null?t.css({width:n,height:r,marginLeft:o,marginTop:u,left:0,top:0,overflow:"hidden"}).find(".navyDialogTable").css({width:n,height:r}):t.css({width:n,height:r,marginLeft:o,marginTop:-s,left:0,overflow:"hidden"}).find(".navyDialogTable").css({width:n,height:r}):u!==null?t.css({width:n,height:r,marginLeft:-i,marginTop:u,top:0,overflow:"hidden"}).find(".navyDialogTable").css({width:n,height:r}):t.css({width:n,height:r,marginLeft:-i,marginTop:-s,overflow:"hidden"}).find(".navyDialogTable").css({width:n,height:r});if(E.isMask&&!w.bodyObj.find(".navyMaskWrapper").length){l=$('<div style="z-index: '+(1+b)+'" class="navyMaskWrapper"></div>').appendTo(w.bodyObj);if(isIE6||navigator.userAgent.toLowerCase().indexOf("mobile")!==-1)h=w.documentObj,p=w.windowObj,d=c=h.height(),v=p.height(),v>=d&&(c=v),l.height(c)}return isIE6&&E.position==="fixed"&&(m=w.windowObj,g=(document.documentElement.clientHeight-r)/2,g=Math.max(g,0),m.scroll(function(){w.dialogObj.css({marginTop:0,top:m.scrollTop()+g})})),this},closeDialog:function(){var e=this,t=e.options;return e.dialogObj.unbind().remove(),t.isMask&&e.bodyObj.find(".navyMaskWrapper").remove(),this},getDialogObj:function(){return this.dialogObj.find(".navyDialogContentContainer")}},NAVY.Alert=function(e,t){var n,r,i,s,o,u,a;t=t||{},n=t.type||"success",t.bgType=t.bgType||0,r=isNaN(t.bgType)?0:t.bgType,i={"-1":"noCss3Bg",0:"uiCss3BlackGradientBG",1:"uiCss3BlueGradientBG",2:"uiCss3GreyGradientBG",3:"uiCss3LightBlueGradientBG",4:"uiCss3LightSteelBlue",5:"uiCss3RoyalBlueGradientBG",6:"uiGoldenrodGradientBG"},s=i[r]||i[0],o="successNavyAlert",u=t.dialogClass,u?u+=" navyDialogAlert":u="navyDialogAlert";switch(n){case"error":o="errorNavyAlert";break;case"warning":o="warningNavyAlert";break;case"loading":o="loadingNavyAlert";break;default:o="successNavyAlert"}return e='<div class="navyAlert '+s+'"><div class="navyAlertSub '+o+'">'+e+"</div></div>",a={isShowTiTle:!1,isShowCloseBtn:!1,isShowSureBtn:!1,isShowCancelBtn:!1,isMask:!1,dialogClass:u,autoCloseSecond:t.autoCloseSecond||3,position:t.position||"fixed",target:t.target||"body",dialogWidth:t.dialogWidth||null,dialogHeight:t.dialogHeight||null,marginLeft:t.marginLeft||null,marginTop:t.marginTop||null,isDrag:!1},n==="loading"&&(a.autoCloseSecond=0),new NAVY.Dialog(e,a)},NAVY.Tip=function(e,t,n){var r,i,s,o,u,a,f,l,c,h,p,d;n=n||{},n.isShowKnowBtn===undefined&&(n.isShowKnowBtn=!0),n.knowBtnText=n.knowBtnText||"\u77e5\u9053\u4e86",r=n.dialogClass,r?r+=" navyDialogTip":r="navyDialogTip",i={isShowTiTle:!1,isShowCloseBtn:!1,isShowSureBtn:!1,isShowCancelBtn:!1,isMask:!1,dialogClass:r,autoCloseSecond:n.autoCloseSecond||0,position:n.position||"absolute",target:e||n.target||"body",knowBtnCbf:n.knowBtnCbf||noop,dialogWidth:n.dialogWidth||null,dialogHeight:n.dialogHeight||null,marginLeft:n.marginLeft||null,marginTop:n.marginTop||null,tipBorderColor:n.tipBorderColor||null,arrowValue:n.arrowValue||null,isDrag:!1},s=n.direction||"top",o="arrowTop";switch(s){case"bottom":o="arrowBottom";break;case"left":o="arrowLeft";break;case"right":o="arrowRight";break;default:o="arrowTop"}return u=i.tipBorderColor,a=i.arrowValue,f={},l={},c=10,u!==null?a!==null?(f.arrowBottom='style="border-top-color:'+u+";left:0;margin-left:"+(a+c)+'px;"',f.arrowLeft='style="border-right-color:'+u+";top:0;margin-top:"+(a+c)+'px;"',f.arrowRight='style="border-left-color:'+u+";top:0;margin-top:"+(a+c)+'px;"',f.arrowTop='style="border-bottom-color:'+u+";left:0;margin-left:"+(a+c)+'px;"',l.arrowBottom='style="left:0;margin-left:'+(a+c)+'px;"',l.arrowLeft='style="top:0;margin-top:'+(a+c)+'px;"',l.arrowRight='style="top:0;margin-top:'+(a+c)+'px;"',l.arrowTop='style="left:0;margin-left:'+(a+c)+'px;"'):(f.arrowBottom='style="border-top-color:'+u+'"',f.arrowLeft='style="border-right-color:'+u+'"',f.arrowRight='style="border-left-color:'+u+'"',f.arrowTop='style="border-bottom-color:'+u+'"'):a!==null&&(f.arrowBottom=l.arrowBottom='style="left:0;margin-left:'+(a+c)+'px;"',f.arrowLeft=l.arrowLeft='style="top:0;margin-top:'+(a+c)+'px;"',f.arrowRight=l.arrowRight='style="top:0;margin-top:'+(a+c)+'px;"',f.arrowTop=l.arrowTop='style="left:0;margin-left:'+(a+c)+'px;"'),h=f[o]||"",p=l[o]||"",t='<div class="navyTip">'+t+"</div><div "+h+' class="navyTipArrow navyTipArrow1 absolute '+o+'1"></div><div '+p+' class="navyTipArrow navyTipArrow2 absolute '+o+'2"></div>',n.isShowKnowBtn&&(t+='<div class="navyDialogTipBtnContainer"><a href="javascript:;" class="navyDialogBtnClick navyDialogTipKnowBtn">'+n.knowBtnText+"</a></div>"),d=new NAVY.Dialog(t,i),u!==null&&d.dialogObj.find(".navyDialogContent").css({"border-color":u}),d},NAVY.ToolTip=function(e,t){var n,r,i,s,o,u,a,f,l,c,h,p,d,v,m,g,y={spaceV:3,spaceH:0,bgColor:"#000",color:"#fff",opacity:.8};$.extend(y.options,t),n=y.spaceV,r=y.spaceH,i=y.bgColor,s=y.color,o=y.opacity,u="style=color:"+s+";background:"+i+";opacity:"+o+";filter:alpha(opacity="+o*100+")",e=$(e),a=e.offset().left,f=e.offset().top,l=e.outerWidth(),c=e.outerHeight(),h=null,p=null,d=0,v=0,m=a+l,g=f+c,e.find("[title]").hover(function(){var t,i,s,o,y,b,w,E,S,x;h=$(this),p=h.attr("title"),p&&(h.attr("title",""),t=h.offset().left+parseInt(h.css("padding-left"))+parseInt(h.css("margin-left")),i=h.offset().top,s=h.outerWidth(),o=h.outerHeight(),this.toolTipObj=$('<div class="navyToolTipWrapper"><div class="navyToolTip" '+u+">"+p+"</div></div>").appendTo(e),y=this.toolTipObj.outerWidth()+r,b=this.toolTipObj.outerHeight()+n,w=t+y,E=i+b+o,S=t-a+y-l,S=S>0?a:S,x=i-f+o+b-c,x=x>0?i-b:x,d=w>m?S:t,v=E>g?x:i+o,this.toolTipObj.offset({left:d+r,top:v+n}),isIE6&&this.toolTipObj.css({width:y-r,height:b-n}))},function(){$(this).attr("title",p),this.toolTipObj.remove()})},NAVY.Ajax=function(e,t){var n,r,i;e=e||{},t=t||{},t.sendTip=t.sendTip||"\u6570\u636e\u4e0b\u8f7d\u4e2d...",t.errorTip=t.errorTip||"\u51fa\u4e86\u70b9\u95ee\u9898\uff0c\u8bf7\u518d\u8bd5\u8bd5\uff01",t.okTip=t.okTip||"\u64cd\u4f5c\u6210\u529f\u4e86",t.okObj=t.okObj||!1,t.closeSec=t.closeSec||2,e.error=e.error||noop,e.complete=e.complete||noop,e.success=e.success||noop,n=t.okObj,r={autoCloseSecond:t.closeSec},$.extend(r,t),i=NAVY.Alert(t.sendTip,{type:"loading"}),$.ajax({url:e.url||"",type:e.type||"post",data:e.data||{},dataType:e.dataType||"json",beforeSend:e.beforeSend||noop,success:function(s){i.closeDialog(),n&&(s[n.key]==n.val?NAVY.Alert(t.okTip,r):(r.type="warning",NAVY.Alert(t.errorTip,r))),e.success(s)},complete:function(t){e.success(t)},error:function(n){e.error(n),i.closeDialog(),r.type="error",NAVY.Alert(t.errorTip,r)},timeout:e.timeout})}
var noop=function(){},isIE6=$.browser.msie&&"6.0"==$.browser.version,NAVY=NAVY||{};NAVY.console=window.console||{log:noop,dir:noop},NAVY.UTIL=NAVY.UTIL||{},NAVY.UTIL.Style=NAVY.UTIL.Style||{},NAVY.UTIL.Style.getMaxZIndex=function(){for(var o=document.getElementsByTagName("*"),t=o.length,i=0,e=1;t>i;i++)e=Math.max(e,o[i].style.zIndex||0);return e},NAVY.UTIL.Style.setMaxZIndex=function(o){o.style.zIndex=1+NAVY.UTIL.Style.getMaxZIndex()},NAVY.Dialog=function(o,t){var i={title:"温馨提示",isShowTiTle:!0,closeText:"X",closeCbf:noop,isShowCloseBtn:!0,isMask:!0,isClickMaskCloseDialog:!1,clickMaskCbf:noop,sureBtnText:"确定",sureBtnCbf:noop,isShowSureBtn:!0,cancelBtnText:"取消",cancelBtnCbf:noop,isShowCancelBtn:!0,target:"body",dialogWidth:null,dialogHeight:null,marginLeft:null,marginTop:null,dialogClass:"",position:"fixed",autoCloseSecond:0,knowBtnCbf:noop,isDrag:!1};this.contentHtml=o||"请填充对话框内容",$.extend(i,t),this.options=i,this.targetObj=$(this.options.target),this.bodyObj=$("body"),this.documentObj=$(document),this.windowObj=$(window),this.init()},NAVY.Dialog.prototype={init:function(){return this.showDialog(),this.initEvent(),this},initEvent:function(){var o=this,t=o.options,i=o.dialogObj,e=i.find(".navyDialogTitleContainer").find(".closeDialogBtn");t.isMask&&this.bodyObj.find(".navyMaskWrapper").click(function(){t.isClickMaskCloseDialog&&o.closeDialog(),t.clickMaskCbf()}),i.on("click",".navyDialogBtnClick",function(){var i=$(this);i.hasClass("closeDialogBtn")?(o.closeDialog(),t.closeCbf()):i.hasClass("navySureBtn")?t.sureBtnCbf.apply(o,arguments):i.hasClass("navyCancelBtn")?(o.closeDialog(),t.cancelBtnCbf.apply(o,arguments)):i.hasClass("navyDialogTipKnowBtn")&&(o.closeDialog(),t.knowBtnCbf.apply(o,arguments))});var a=t.autoCloseSecond;if(0!==a){if(e.length){e.html('<span class="leftSecond">'+a+"</span>秒后关闭");var n=e.find(".leftSecond")[0];NAVY.UTIL.Date.countDown(n,a)}var l=setTimeout(function(){o.closeDialog(),l&&clearTimeout(l)},1e3*a)}if(t.isDrag){var s=!1,r={x:0,y:0},c={left:0,top:0};i.find(".navyDialogTitleContainer").css("cursor","move").mousedown(function(o){return s=!0,NAVY.UTIL.Style.setMaxZIndex(i[0]),r.x=o.pageX,r.y=o.pageY,c.left=i.position().left,c.top=i.position().top,!1}),$(document).on("mouseup mousemove",function(o){switch(o.type){case"mouseup":return s=!1,!1;case"mousemove":if(s){var t={x:o.pageX,y:o.pageY},e=t.x-r.x,a=t.y-r.y;if(0===e%2||0===a%2){var n=c.left+e,l=c.top+a;n=0>=n?0:n,l=0>=l?0:l,i.css({left:n,top:l})}}return!1}})}return this},showDialog:function(){var o=NAVY.UTIL.Style,t=o.getMaxZIndex(),i=this,e=i.options,a="";"fixed"!==e.position&&(a="position:absolute");var n=['<div style="z-index: '+(2+t)+";"+a+'" class="navyDialogWrapper '+e.dialogClass+'"><table class="navyDialogTable"><tr><td>'];e.isShowTiTle?e.isShowCloseBtn?n.push('<h2 class="navyDialogTitleContainer relative"><a href="javascript:;" class="navyDialogBtnClick closeDialogBtn floatRight">'+e.closeText+'</a><span class="dialogTitle">'+e.title+"</span></h2>"):n.push('<h2 class="navyDialogTitleContainer relative"><span class="dialogTitle textAlignCenter">'+e.title+"</span></h2>"):e.isShowCloseBtn&&n.push('<h2 class="navyDialogTitleContainer relative"><a href="javascript:;" class="navyDialogBtnClick closeDialogBtn floatRight">'+e.closeText+"</a></h2>"),n.push('<div class="navyDialogContentContainer"><div class="navyDialogContent">'+i.contentHtml+"</div></div>"),e.isShowSureBtn?e.isShowCancelBtn?n.push('<div class="navyDialogBtnContainer"><div class="navyDialogBtnContent"><a href="javascript:;" class="navyDialogBtn navyDialogBtnClick navySureBtn">'+e.sureBtnText+'</a><a href="javascript:;" class="navyDialogBtn navyDialogBtnClick navyCancelBtn">'+e.cancelBtnText+"</a></div></div>"):n.push('<div class="navyDialogBtnContainer"><div class="navyDialogBtnContent"><a href="javascript:;" class="navyDialogBtn navyDialogBtnClick navySureBtn marginCenter">'+e.sureBtnText+"</a></div></div>"):e.isShowCancelBtn&&n.push('<div class="navyDialogBtnContainer"><div class="navyDialogBtnContent"><a href="javascript:;" class="navyDialogBtn navyDialogBtnClick navyCancelBtn marginCenter">'+e.cancelBtnText+"</a></div></div>"),n.push("</td></tr></table></div>"),i.dialogObj=$(n.join("")).appendTo(e.target);var l=i.dialogObj,s=e.dialogWidth||l.outerWidth(),r=e.dialogHeight||l.outerHeight();s=80>s?80:s;var c=s/2,g=r/2,d=e.marginLeft,p=e.marginTop;if(-1!==navigator.userAgent.toLowerCase().indexOf("mobile")){var h=i.windowObj.height(),v=i.documentObj.height();h=Math.max(h,v),p=i.documentObj.scrollTop()+80,l.css({width:s,height:r,marginLeft:-c,marginTop:p,top:0,overflow:"hidden",position:"absolute"}).find(".navyDialogTable").css({width:s,height:r})}else null!==d?null!==p?l.css({width:s,height:r,marginLeft:d,marginTop:p,left:0,top:0,overflow:"hidden"}).find(".navyDialogTable").css({width:s,height:r}):l.css({width:s,height:r,marginLeft:d,marginTop:-g,left:0,overflow:"hidden"}).find(".navyDialogTable").css({width:s,height:r}):null!==p?l.css({width:s,height:r,marginLeft:-c,marginTop:p,top:0,overflow:"hidden"}).find(".navyDialogTable").css({width:s,height:r}):l.css({width:s,height:r,marginLeft:-c,marginTop:-g,overflow:"hidden"}).find(".navyDialogTable").css({width:s,height:r});if(e.isMask&&!i.bodyObj.find(".navyMaskWrapper").length){var u=$('<div style="z-index: '+(1+t)+'" class="navyMaskWrapper"></div>').appendTo(i.bodyObj);if(isIE6||-1!==navigator.userAgent.toLowerCase().indexOf("mobile")){var f,y=i.documentObj,w=i.windowObj,T=f=y.height(),b=w.height();b>=T&&(f=b),u.height(f)}}if(isIE6&&"fixed"===e.position){var C=i.windowObj,B=(document.documentElement.clientHeight-r)/2;B=Math.max(B,0),C.scroll(function(){i.dialogObj.css({marginTop:0,top:C.scrollTop()+B})})}return this},closeDialog:function(){var o=this,t=o.options;return o.dialogObj.unbind().remove(),t.isMask&&o.bodyObj.find(".navyMaskWrapper").remove(),this},getDialogObj:function(){return this.dialogObj.find(".navyDialogContentContainer")}},NAVY.Alert=function(o,t){t=t||{};var i=t.type||"success";t.bgType=t.bgType||0;var e=isNaN(t.bgType)?0:t.bgType,a={"-1":"noCss3Bg",0:"uiCss3BlackGradientBG",1:"uiCss3BlueGradientBG",2:"uiCss3GreyGradientBG",3:"uiCss3LightBlueGradientBG",4:"uiCss3LightSteelBlue",5:"uiCss3RoyalBlueGradientBG",6:"uiGoldenrodGradientBG"},n=a[e]||a["0"],l="successNavyAlert",s=t.dialogClass;switch(s?s+=" navyDialogAlert":s="navyDialogAlert",i){case"error":l="errorNavyAlert";break;case"warning":l="warningNavyAlert";break;case"loading":l="loadingNavyAlert";break;default:l="successNavyAlert"}o='<div class="navyAlert '+n+'"><div class="navyAlertSub '+l+'">'+o+"</div></div>";var r={isShowTiTle:!1,isShowCloseBtn:!1,isShowSureBtn:!1,isShowCancelBtn:!1,isMask:!1,dialogClass:s,autoCloseSecond:t.autoCloseSecond||3,position:t.position||"fixed",target:t.target||"body",dialogWidth:t.dialogWidth||null,dialogHeight:t.dialogHeight||null,marginLeft:t.marginLeft||null,marginTop:t.marginTop||null};return"loading"===i&&(r.autoCloseSecond=0),new NAVY.Dialog(o,r)},NAVY.Tip=function(o,t,i){i=i||{},void 0===i.isShowKnowBtn&&(i.isShowKnowBtn=!0),i.knowBtnText=i.knowBtnText||"知道了";var e=i.dialogClass;e?e+=" navyDialogTip":e="navyDialogTip";var a={isShowTiTle:!1,isShowCloseBtn:!1,isShowSureBtn:!1,isShowCancelBtn:!1,isMask:!1,dialogClass:e,autoCloseSecond:i.autoCloseSecond||0,position:i.position||"absolute",target:o||i.target||"body",knowBtnCbf:i.knowBtnCbf||noop,dialogWidth:i.dialogWidth||null,dialogHeight:i.dialogHeight||null,marginLeft:i.marginLeft||null,marginTop:i.marginTop||null,tipBorderColor:i.tipBorderColor||null,arrowValue:i.arrowValue||null},n=i.direction||"top",l="arrowTop";switch(n){case"bottom":l="arrowBottom";break;case"left":l="arrowLeft";break;case"right":l="arrowRight";break;default:l="arrowTop"}var s=a.tipBorderColor,r=a.arrowValue,c={},g={},d=10;null!==s?null!==r?(c.arrowBottom='style="border-top-color:'+s+";left:0;margin-left:"+(r+d)+'px;"',c.arrowLeft='style="border-right-color:'+s+";top:0;margin-top:"+(r+d)+'px;"',c.arrowRight='style="border-left-color:'+s+";top:0;margin-top:"+(r+d)+'px;"',c.arrowTop='style="border-bottom-color:'+s+";left:0;margin-left:"+(r+d)+'px;"',g.arrowBottom='style="left:0;margin-left:'+(r+d)+'px;"',g.arrowLeft='style="top:0;margin-top:'+(r+d)+'px;"',g.arrowRight='style="top:0;margin-top:'+(r+d)+'px;"',g.arrowTop='style="left:0;margin-left:'+(r+d)+'px;"'):(c.arrowBottom='style="border-top-color:'+s+'"',c.arrowLeft='style="border-right-color:'+s+'"',c.arrowRight='style="border-left-color:'+s+'"',c.arrowTop='style="border-bottom-color:'+s+'"'):null!==r&&(c.arrowBottom=g.arrowBottom='style="left:0;margin-left:'+(r+d)+'px;"',c.arrowLeft=g.arrowLeft='style="top:0;margin-top:'+(r+d)+'px;"',c.arrowRight=g.arrowRight='style="top:0;margin-top:'+(r+d)+'px;"',c.arrowTop=g.arrowTop='style="left:0;margin-left:'+(r+d)+'px;"');var p=c[l]||"",h=g[l]||"";t='<div class="navyTip">'+t+"</div><div "+p+' class="navyTipArrow navyTipArrow1 absolute '+l+'1"></div><div '+h+' class="navyTipArrow navyTipArrow2 absolute '+l+'2"></div>',i.isShowKnowBtn&&(t+='<div class="navyDialogTipBtnContainer"><a href="javascript:;" class="navyDialogBtnClick navyDialogTipKnowBtn">'+i.knowBtnText+"</a></div>");var v=new NAVY.Dialog(t,a);return null!==s&&v.dialogObj.find(".navyDialogContent").css({"border-color":s}),v},NAVY.ToolTip=function(o,t){var i={spaceV:3,spaceH:0,bgColor:"#000",color:"#fff",opacity:.8};$.extend(i.options,t);var e=i.spaceV,a=i.spaceH,n=i.bgColor,l=i.color,s=i.opacity,r="style=color:"+l+";background:"+n+";opacity:"+s+";filter:alpha(opacity="+100*s+")";o=$(o);var c=o.offset().left,g=o.offset().top,d=o.outerWidth(),p=o.outerHeight(),h=null,v=null,u=0,f=0,y=c+d,w=g+p;o.find("[title]").hover(function(){if(h=$(this),v=h.attr("title")){h.attr("title","");var t=h.offset().left+parseInt(h.css("padding-left"))+parseInt(h.css("margin-left")),i=h.offset().top,n=(h.outerWidth(),h.outerHeight());this.toolTipObj=$('<div class="navyToolTipWrapper"><div class="navyToolTip" '+r+">"+v+"</div></div>").appendTo(o);var l=this.toolTipObj.outerWidth()+a,s=this.toolTipObj.outerHeight()+e,T=t+l,b=i+s+n,C=t-c+l-d;C=C>0?c:C;var B=i-g+n+s-p;B=B>0?i-s:B,u=T>y?C:t,f=b>w?B:i+n,this.toolTipObj.offset({left:u+a,top:f+e}),isIE6&&this.toolTipObj.css({width:l-a,height:s-e})}},function(){$(this).attr("title",v),this.toolTipObj.remove()})},NAVY.Ajax=function(o,t){o=o||{},t=t||{},t.sendTip=t.sendTip||"数据下载中...",t.errorTip=t.errorTip||"出了点问题，请再试试！",t.okTip=t.okTip||"操作成功了",t.okObj=t.okObj||!1,t.closeSec=t.closeSec||2,o.error=o.error||noop,o.complete=o.complete||noop,o.success=o.success||noop;var i=t.okObj,e={autoCloseSecond:t.closeSec};$.extend(e,t);var a=NAVY.Alert(t.sendTip,{type:"loading"});$.ajax({url:o.url||"",type:o.type||"post",data:o.data||{},dataType:o.dataType||"json",beforeSend:o.beforeSend||noop,success:function(n){a.closeDialog(),i&&(n[i.key]==i.val?NAVY.Alert(t.okTip,e):(e.type="warning",NAVY.Alert(t.errorTip,e))),o.success(n)},complete:function(t){o.success(t)},error:function(i){o.error(i),a.closeDialog(),e.type="error",NAVY.Alert(t.errorTip,e)},timeout:o.timeout})};
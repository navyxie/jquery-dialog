var noop=function(){},NAVY=NAVY||{};NAVY.console=window.console||{log:noop,dir:noop},NAVY.UTIL=NAVY.UTIL||{},NAVY.UTIL.Style=NAVY.UTIL.Style||{},NAVY.UTIL.Style.getMaxZIndex=function(){for(var a=document.getElementsByTagName("*"),t=a.length,n=0,s=1;t>n;n++)s=Math.max(s,a[n].style.zIndex||0);return s},NAVY.UTIL.Style.setMaxZIndex=function(a){a.style.zIndex=1+NAVY.UTIL.Style.getMaxZIndex()},NAVY.Dialog=function(a,t){var n={title:"温馨提示",isShowTiTle:!0,closeText:"X",closeCbf:noop,isShowCloseBtn:!0,isMask:!0,isClickMaskCloseDialog:!1,clickMaskCbf:noop,sureBtnText:"确定",sureBtnCbf:noop,isShowSureBtn:!0,cancelBtnText:"取消",cancelBtnCbf:noop,isShowCancelBtn:!0,target:"body",dialogWidth:null,dialogHeight:null,marginLeft:null,marginTop:null,dialogClass:"",position:"fixed",autoCloseSecond:0,knowBtnCbf:noop,isDrag:!1};this.contentHtml=a||"请填充对话框内容",$.extend(n,t),this.options=n,this.targetObj=$(this.options.target),this.bodyObj=$("body"),this.documentObj=$(document),this.windowObj=$(window),this.init()},NAVY.Dialog.prototype={init:function(){return this.showDialog(),this.initEvent(),this},initEvent:function(){var a=this,t=a.options,n=a.dialogObj,s=n.find(".navyDialogTitleContainer").find(".closeDialogBtn");t.isMask&&this.bodyObj.find(".navyMaskWrapper").click(function(){t.isClickMaskCloseDialog&&a.closeDialog(),t.clickMaskCbf()}),n.on("click",".navyDialogBtnClick",function(){var n=$(this);n.hasClass("closeDialogBtn")?(a.closeDialog(),t.closeCbf()):n.hasClass("navySureBtn")?t.sureBtnCbf.apply(a,arguments):n.hasClass("navyCancelBtn")?(a.closeDialog(),t.cancelBtnCbf.apply(a,arguments)):n.hasClass("navyDialogTipKnowBtn")&&(a.closeDialog(),t.knowBtnCbf.apply(a,arguments))});var e=t.autoCloseSecond;if(0!==e){if(s.length){s.html('<span class="leftSecond">'+e+"</span>秒后关闭");var i=s.find(".leftSecond")[0];NAVY.UTIL.Date.countDown(i,e)}var d=setTimeout(function(){a.closeDialog(),d&&clearTimeout(d)},1e3*e)}if(t.isDrag){var r=!1,o={x:0,y:0},l={left:0,top:0};n.find(".navyDialogTitleContainer").css("cursor","move").mousedown(function(a){return r=!0,NAVY.UTIL.Style.setMaxZIndex(n[0]),o.x=a.pageX,o.y=a.pageY,l.left=n.position().left,l.top=n.position().top,!1}),$(document).on("mouseup mousemove",function(a){switch(a.type){case"mouseup":return r=!1,!1;case"mousemove":if(r){var t={x:a.pageX,y:a.pageY},s=t.x-o.x,e=t.y-o.y;if(0===s%2||0===e%2){var i=l.left+s,d=l.top+e;i=0>=i?0:i,d=0>=d?0:d,n.css({left:i,top:d})}}return!1}})}return this},showDialog:function(){var a=NAVY.UTIL.Style,t=a.getMaxZIndex(),n=this,s=n.options,e="";"fixed"!==s.position&&(e="position:absolute");var i=['<div style="z-index: '+(2+t)+";"+e+'" class="navyDialogWrapper '+s.dialogClass+'"><table class="navyDialogTable"><tr><td>'];s.isShowTiTle?s.isShowCloseBtn?i.push('<h2 class="navyDialogTitleContainer relative"><a href="javascript:;" class="navyDialogBtnClick closeDialogBtn floatRight">'+s.closeText+'</a><span class="dialogTitle">'+s.title+"</span></h2>"):i.push('<h2 class="navyDialogTitleContainer relative"><span class="dialogTitle textAlignCenter">'+s.title+"</span></h2>"):s.isShowCloseBtn&&i.push('<h2 class="navyDialogTitleContainer relative"><a href="javascript:;" class="navyDialogBtnClick closeDialogBtn floatRight">'+s.closeText+"</a></h2>"),i.push('<div class="navyDialogContentContainer"><div class="navyDialogContent">'+n.contentHtml+"</div></div>"),s.isShowSureBtn?s.isShowCancelBtn?i.push('<div class="navyDialogBtnContainer"><div class="navyDialogBtnContent"><a href="javascript:;" class="navyDialogBtn navyDialogBtnClick navySureBtn">'+s.sureBtnText+'</a><a href="javascript:;" class="navyDialogBtn navyDialogBtnClick navyCancelBtn">'+s.cancelBtnText+"</a></div></div>"):i.push('<div class="navyDialogBtnContainer"><div class="navyDialogBtnContent"><a href="javascript:;" class="navyDialogBtn navyDialogBtnClick navySureBtn marginCenter">'+s.sureBtnText+"</a></div></div>"):s.isShowCancelBtn&&i.push('<div class="navyDialogBtnContainer"><div class="navyDialogBtnContent"><a href="javascript:;" class="navyDialogBtn navyDialogBtnClick navyCancelBtn marginCenter">'+s.cancelBtnText+"</a></div></div>"),i.push("</td></tr></table></div>"),n.dialogObj=$(i.join("")).appendTo(s.target);var d=n.dialogObj,r=s.dialogWidth||d.outerWidth(),o=s.dialogHeight||d.outerHeight();r=80>r?80:r;var l=r/2,p=o/2,u=s.marginLeft,c=s.marginTop;if(-1!==navigator.userAgent.toLowerCase().indexOf("mobile")){var v=n.windowObj.height(),m=n.documentObj.height();v=Math.max(v,m),c=n.documentObj.scrollTop()+80,d.css({width:r,height:o,marginLeft:-l,marginTop:c,top:0,overflow:"hidden",position:"absolute"}).find(".navyDialogTable").css({width:r,height:o})}else null!==u?null!==c?d.css({width:r,height:o,marginLeft:u,marginTop:c,left:0,top:0,overflow:"hidden"}).find(".navyDialogTable").css({width:r,height:o}):d.css({width:r,height:o,marginLeft:u,marginTop:-p,left:0,overflow:"hidden"}).find(".navyDialogTable").css({width:r,height:o}):null!==c?d.css({width:r,height:o,marginLeft:-l,marginTop:c,top:0,overflow:"hidden"}).find(".navyDialogTable").css({width:r,height:o}):d.css({width:r,height:o,marginLeft:-l,marginTop:-p,overflow:"hidden"}).find(".navyDialogTable").css({width:r,height:o});if(s.isMask&&!n.bodyObj.find(".navyMaskWrapper").length){var g=$('<div style="z-index: '+(1+t)+'" class="navyMaskWrapper"></div>').appendTo(n.bodyObj);if($.browser.msie&&"6.0"==$.browser.version||-1!==navigator.userAgent.toLowerCase().indexOf("mobile")){var f,h=n.documentObj,I=n.windowObj,b=f=h.height(),q=I.height();q>=b&&(f=q),g.height(f)}}return this},closeDialog:function(){var a=this,t=a.options;return a.dialogObj.unbind().remove(),t.isMask&&a.bodyObj.find(".navyMaskWrapper").remove(),this},getDialogObj:function(){return this.dialogObj.find(".navyDialogContentContainer")}},NAVY.Alert=function(a,t){t=t||{};var n=t.type||"success";t.bgType=t.bgType||0;var s=isNaN(t.bgType)?0:t.bgType,e={"-1":"noCss3Bg",0:"uiCss3BlackGradientBG",1:"uiCss3BlueGradientBG",2:"uiCss3GreyGradientBG",3:"uiCss3LightBlueGradientBG",4:"uiCss3LightSteelBlue",5:"uiCss3RoyalBlueGradientBG",6:"uiGoldenrodGradientBG"},i=e[s]||e["0"],d="successNavyAlert",r=t.dialogClass;switch(r?r+=" navyDialogAlert":r="navyDialogAlert",n){case"error":d="errorNavyAlert";break;case"warning":d="warningNavyAlert";break;case"loading":d="loadingNavyAlert";break;default:d="successNavyAlert"}a='<div class="navyAlert '+i+'"><div class="navyAlertSub '+d+'">'+a+"</div></div>";var o={isShowTiTle:!1,isShowCloseBtn:!1,isShowSureBtn:!1,isShowCancelBtn:!1,isMask:!1,dialogClass:r,autoCloseSecond:t.autoCloseSecond||3,position:t.position||"fixed",target:t.target||"body",dialogWidth:t.dialogWidth||null,dialogHeight:t.dialogHeight||null,marginLeft:t.marginLeft||null,marginTop:t.marginTop||null};return"loading"===n&&(o.autoCloseSecond=0),new NAVY.Dialog(a,o)},NAVY.Tip=function(a,t,n){n=n||{},void 0===n.isShowKnowBtn&&(n.isShowKnowBtn=!0),n.knowBtnText=n.knowBtnText||"知道了";var s=n.dialogClass;s?s+=" navyDialogTip":s="navyDialogTip";var e={isShowTiTle:!1,isShowCloseBtn:!1,isShowSureBtn:!1,isShowCancelBtn:!1,isMask:!1,dialogClass:s,autoCloseSecond:n.autoCloseSecond||0,position:n.position||"absolute",target:a||n.target||"body",knowBtnCbf:n.knowBtnCbf||noop,dialogWidth:n.dialogWidth||null,dialogHeight:n.dialogHeight||null,marginLeft:n.marginLeft||null,marginTop:n.marginTop||null,tipBorderColor:n.tipBorderColor||null,arrowValue:n.arrowValue||null},i=n.direction||"top",d="arrowTop";switch(i){case"bottom":d="arrowBottom";break;case"left":d="arrowLeft";break;case"right":d="arrowRight";break;default:d="arrowTop"}var r=e.tipBorderColor,o=e.arrowValue,l={},p={},u=10;null!==r?null!==o?(l.arrowBottom='style="border-top-color:'+r+";left:0;margin-left:"+(o+u)+'px;"',l.arrowLeft='style="border-right-color:'+r+";top:0;margin-top:"+(o+u)+'px;"',l.arrowRight='style="border-left-color:'+r+";top:0;margin-top:"+(o+u)+'px;"',l.arrowTop='style="border-bottom-color:'+r+";left:0;margin-left:"+(o+u)+'px;"',p.arrowBottom='style="left:0;margin-left:'+(o+u)+'px;"',p.arrowLeft='style="top:0;margin-top:'+(o+u)+'px;"',p.arrowRight='style="top:0;margin-top:'+(o+u)+'px;"',p.arrowTop='style="left:0;margin-left:'+(o+u)+'px;"'):(l.arrowBottom='style="border-top-color:'+r+'"',l.arrowLeft='style="border-right-color:'+r+'"',l.arrowRight='style="border-left-color:'+r+'"',l.arrowTop='style="border-bottom-color:'+r+'"'):null!==o&&(l.arrowBottom=p.arrowBottom='style="left:0;margin-left:'+(o+u)+'px;"',l.arrowLeft=p.arrowLeft='style="top:0;margin-top:'+(o+u)+'px;"',l.arrowRight=p.arrowRight='style="top:0;margin-top:'+(o+u)+'px;"',l.arrowTop=p.arrowTop='style="left:0;margin-left:'+(o+u)+'px;"');var c=l[d]||"",v=p[d]||"";t='<div class="navyTip">'+t+"</div><div "+c+' class="navyTipArrow navyTipArrow1 absolute '+d+'1"></div><div '+v+' class="navyTipArrow navyTipArrow2 absolute '+d+'2"></div>',n.isShowKnowBtn&&(t+='<div class="navyDialogTipBtnContainer"><a href="javascript:;" class="navyDialogBtnClick navyDialogTipKnowBtn">'+n.knowBtnText+"</a></div>");var m=new NAVY.Dialog(t,e);return null!==r&&m.dialogObj.find(".navyDialogContent").css({"border-color":r}),m},NAVY.ToolTip=function(a,t){var n={spaceV:3,spaceH:0,bgColor:"#000",color:"#fff",opacity:.8};$.extend(n.options,t);var s=n.spaceV,e=n.spaceH,i=n.bgColor,d=n.color,r=n.opacity,o="style=color:"+d+";background:"+i+";opacity:"+r+";filter:alpha(opacity="+100*r+")";a=$(a);var l=a.offset().left,p=a.offset().top,u=a.outerWidth(),c=a.outerHeight(),v=null,m=null,g=0,f=0,h=l+u,I=p+c;a.find("[title]").hover(function(){if(v=$(this),m=v.attr("title")){v.attr("title","");var t=v.offset().left+parseInt(v.css("padding-left"))+parseInt(v.css("margin-left")),n=v.offset().top,i=(v.outerWidth(),v.outerHeight());this.toolTipObj=$('<div class="navyToolTipWrapper"><div class="navyToolTip" '+o+">"+m+"</div></div>").appendTo(a);var d=this.toolTipObj.outerWidth()+e,r=this.toolTipObj.outerHeight()+s,b=t+d,q=n+r+i,y=t-l+d-u;y=y>0?l:y;var C=n-p+i+r-c;C=C>0?n-r:C,g=b>h?y:t,f=q>I?C:n+i,this.toolTipObj.offset({left:g+e,top:f+s}),$.browser.msie&&"6.0"==$.browser.version&&this.toolTipObj.css({width:d-e,height:r-s})}},function(){$(this).attr("title",m),this.toolTipObj.remove()})},NAVY.Ajax=function(a,t){a=a||{},t=t||{},t.sendTip=t.sendTip||"数据下载中...",t.errorTip=t.errorTip||"出了点问题，请再试试！",t.okTip=t.okTip||"操作成功了",t.okObj=t.okObj||!1,t.closeSec=t.closeSec||2,a.error=a.error||noop,a.complete=a.complete||noop,a.success=a.success||noop;var n=t.okObj,s={autoCloseSecond:t.closeSec};$.extend(s,t);var e=NAVY.Alert(t.sendTip,{type:"loading"});$.ajax({url:a.url||"",type:a.type||"post",data:a.data||{},dataType:a.dataType||"json",beforeSend:a.beforeSend||noop,success:function(i){e.closeDialog(),n&&(i[n.key]==n.val?NAVY.Alert(t.okTip,s):(s.type="warning",NAVY.Alert(t.errorTip,s))),a.success(i)},complete:function(t){a.success(t)},error:function(n){a.error(n),e.closeDialog(),s.type="error",NAVY.Alert(t.errorTip,s)},timeout:a.timeout})};
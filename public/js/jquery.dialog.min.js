var noop=function(){},NAVY=NAVY||{};NAVY.console=window.console||{log:noop,dir:noop},NAVY.UTIL=NAVY.UTIL||{},NAVY.UTIL.Style=NAVY.UTIL.Style||{},NAVY.UTIL.Style.getMaxZIndex=function(){for(var t=document.getElementsByTagName("*"),o=t.length,i=0,e=1;o>i;i++)e=Math.max(e,t[i].style.zIndex||0);return e},NAVY.UTIL.Style.setMaxZIndex=function(t){t.style.zIndex=1+NAVY.UTIL.Style.getMaxZIndex()},NAVY.Dialog=function(t,o){var i={title:"温馨提示",isShowTiTle:!0,closeText:"X",closeCbf:noop,isShowCloseBtn:!0,isMask:!0,isClickMaskCloseDialog:!1,clickMaskCbf:noop,sureBtnText:"确定",sureBtnCbf:noop,isShowSureBtn:!0,cancelBtnText:"取消",cancelBtnCbf:noop,isShowCancelBtn:!0,target:"body",dialogWidth:null,dialogHeight:null,marginLeft:null,marginTop:null,dialogClass:"",position:"fixed",autoCloseSecond:0,knowBtnCbf:noop,isDrag:!1};this.contentHtml=t||"请填充对话框内容",$.extend(i,o),this.options=i,this.targetObj=$(this.options.target),this.bodyObj=$("body"),this.documentObj=$(document),this.windowObj=$(window),this.init()},NAVY.Dialog.prototype={init:function(){return this.showDialog(),this.initEvent(),this},initEvent:function(){var t=this,o=t.options,i=t.dialogObj,e=i.find(".navyDialogTitleContainer").find(".closeDialogBtn");o.isMask&&this.bodyObj.find(".navyMaskWrapper").click(function(){o.isClickMaskCloseDialog&&t.closeDialog(),o.clickMaskCbf()}),i.on("click",".navyDialogBtnClick",function(){var i=$(this);i.hasClass("closeDialogBtn")?(t.closeDialog(),o.closeCbf()):i.hasClass("navySureBtn")?o.sureBtnCbf.apply(t,arguments):i.hasClass("navyCancelBtn")?(t.closeDialog(),o.cancelBtnCbf.apply(t,arguments)):i.hasClass("navyDialogTipKnowBtn")&&(t.closeDialog(),o.knowBtnCbf.apply(t,arguments))});var a=o.autoCloseSecond;if(0!==a){if(e.length){e.html('<span class="leftSecond">'+a+"</span>秒后关闭");var n=e.find(".leftSecond")[0];NAVY.UTIL.Date.countDown(n,a)}var s=setTimeout(function(){t.closeDialog(),s&&clearTimeout(s)},1e3*a)}if(o.isDrag){var l=!1,r={x:0,y:0},c={left:0,top:0};i.find(".navyDialogTitleContainer").css("cursor","move").mousedown(function(t){return l=!0,NAVY.UTIL.Style.setMaxZIndex(i[0]),r.x=t.pageX,r.y=t.pageY,c.left=i.position().left,c.top=i.position().top,!1}),$(document).on("mouseup mousemove",function(t){switch(t.type){case"mouseup":return l=!1,!1;case"mousemove":if(l){var o={x:t.pageX,y:t.pageY},e=o.x-r.x,a=o.y-r.y;if(0===e%2||0===a%2){var n=c.left+e,s=c.top+a;n=0>=n?0:n,s=0>=s?0:s,i.css({left:n,top:s})}}return!1}})}return this},showDialog:function(){var t=NAVY.UTIL.Style,o=t.getMaxZIndex(),i=this,e=i.options,a="";"fixed"!==e.position&&(a="position:absolute");var n=['<div style="z-index: '+(2+o)+";"+a+'" class="navyDialogWrapper '+e.dialogClass+'"><table class="navyDialogTable"><tr><td>'];e.isShowTiTle?e.isShowCloseBtn?n.push('<h2 class="navyDialogTitleContainer relative"><a href="javascript:;" class="navyDialogBtnClick closeDialogBtn floatRight">'+e.closeText+'</a><span class="dialogTitle">'+e.title+"</span></h2>"):n.push('<h2 class="navyDialogTitleContainer relative"><span class="dialogTitle textAlignCenter">'+e.title+"</span></h2>"):e.isShowCloseBtn&&n.push('<h2 class="navyDialogTitleContainer relative"><a href="javascript:;" class="navyDialogBtnClick closeDialogBtn floatRight">'+e.closeText+"</a></h2>"),n.push('<div class="navyDialogContentContainer"><div class="navyDialogContent">'+i.contentHtml+"</div></div>"),e.isShowSureBtn?e.isShowCancelBtn?n.push('<div class="navyDialogBtnContainer"><div class="navyDialogBtnContent"><a href="javascript:;" class="navyDialogBtn navyDialogBtnClick navySureBtn">'+e.sureBtnText+'</a><a href="javascript:;" class="navyDialogBtn navyDialogBtnClick navyCancelBtn">'+e.cancelBtnText+"</a></div></div>"):n.push('<div class="navyDialogBtnContainer"><div class="navyDialogBtnContent"><a href="javascript:;" class="navyDialogBtn navyDialogBtnClick navySureBtn marginCenter">'+e.sureBtnText+"</a></div></div>"):e.isShowCancelBtn&&n.push('<div class="navyDialogBtnContainer"><div class="navyDialogBtnContent"><a href="javascript:;" class="navyDialogBtn navyDialogBtnClick navyCancelBtn marginCenter">'+e.cancelBtnText+"</a></div></div>"),n.push("</td></tr></table></div>"),i.dialogObj=$(n.join("")).appendTo(e.target);var s=i.dialogObj,l=e.dialogWidth||s.outerWidth(),r=e.dialogHeight||s.outerHeight();l=80>l?80:l;var c=l/2,p=r/2,g=e.marginLeft,d=e.marginTop;if(-1!==navigator.userAgent.toLowerCase().indexOf("mobile")){var u=i.windowObj.height(),v=i.documentObj.height();u=Math.max(u,v),d=i.documentObj.scrollTop()+80,s.css({width:l,height:r,marginLeft:-c,marginTop:d,top:0,overflow:"hidden"}).find(".navyDialogTable").css({width:l,height:r})}else null!==g?null!==d?s.css({width:l,height:r,marginLeft:g,marginTop:d,left:0,top:0,overflow:"hidden"}).find(".navyDialogTable").css({width:l,height:r}):s.css({width:l,height:r,marginLeft:g,marginTop:-p,left:0,overflow:"hidden"}).find(".navyDialogTable").css({width:l,height:r}):null!==d?s.css({width:l,height:r,marginLeft:-c,marginTop:d,top:0,overflow:"hidden"}).find(".navyDialogTable").css({width:l,height:r}):s.css({width:l,height:r,marginLeft:-c,marginTop:-p,overflow:"hidden"}).find(".navyDialogTable").css({width:l,height:r});if(e.isMask&&!i.bodyObj.find(".navyMaskWrapper").length){var h=$('<div style="z-index: '+(1+o)+'" class="navyMaskWrapper"></div>').appendTo(i.bodyObj);if($.browser.msie&&"6.0"==$.browser.version||-1!==navigator.userAgent.toLowerCase().indexOf("mobile")){var f,y=i.documentObj,T=i.windowObj,C=f=y.height(),w=T.height();w>=C&&(f=w),h.height(f)}}return this},closeDialog:function(){var t=this,o=t.options;return t.dialogObj.unbind().remove(),o.isMask&&t.bodyObj.find(".navyMaskWrapper").remove(),this},getDialogObj:function(){return this.dialogObj.find(".navyDialogContentContainer")}},NAVY.Alert=function(t,o){o=o||{};var i=o.type||"success";o.bgType=o.bgType||0;var e=isNaN(o.bgType)?0:o.bgType,a={"-1":"noCss3Bg",0:"uiCss3BlackGradientBG",1:"uiCss3BlueGradientBG",2:"uiCss3GreyGradientBG",3:"uiCss3LightBlueGradientBG",4:"uiCss3LightSteelBlue",5:"uiCss3RoyalBlueGradientBG",6:"uiGoldenrodGradientBG"},n=a[e]||a["0"],s="successNavyAlert",l=o.dialogClass;switch(l?l+=" navyDialogAlert":l="navyDialogAlert",i){case"error":s="errorNavyAlert";break;case"warning":s="warningNavyAlert";break;case"loading":s="loadingNavyAlert";break;default:s="successNavyAlert"}t='<div class="navyAlert '+n+'"><div class="navyAlertSub '+s+'">'+t+"</div></div>";var r={isShowTiTle:!1,isShowCloseBtn:!1,isShowSureBtn:!1,isShowCancelBtn:!1,isMask:!1,dialogClass:l,autoCloseSecond:o.autoCloseSecond||3,position:o.position||"fixed",target:o.target||"body",dialogWidth:o.dialogWidth||null,dialogHeight:o.dialogHeight||null,marginLeft:o.marginLeft||null,marginTop:o.marginTop||null};return"loading"===i&&(r.autoCloseSecond=0),new NAVY.Dialog(t,r)},NAVY.Tip=function(t,o,i){i=i||{},void 0===i.isShowKnowBtn&&(i.isShowKnowBtn=!0),i.knowBtnText=i.knowBtnText||"知道了";var e=i.dialogClass;e?e+=" navyDialogTip":e="navyDialogTip";var a={isShowTiTle:!1,isShowCloseBtn:!1,isShowSureBtn:!1,isShowCancelBtn:!1,isMask:!1,dialogClass:e,autoCloseSecond:i.autoCloseSecond||0,position:i.position||"absolute",target:t||i.target||"body",knowBtnCbf:i.knowBtnCbf||noop,dialogWidth:i.dialogWidth||null,dialogHeight:i.dialogHeight||null,marginLeft:i.marginLeft||null,marginTop:i.marginTop||null,tipBorderColor:i.tipBorderColor||null,arrowValue:i.arrowValue||null},n=i.direction||"top",s="arrowTop";switch(n){case"bottom":s="arrowBottom";break;case"left":s="arrowLeft";break;case"right":s="arrowRight";break;default:s="arrowTop"}var l=a.tipBorderColor,r=a.arrowValue,c={},p={},g=10;null!==l?null!==r?(c.arrowBottom='style="border-top-color:'+l+";left:0;margin-left:"+(r+g)+'px;"',c.arrowLeft='style="border-right-color:'+l+";top:0;margin-top:"+(r+g)+'px;"',c.arrowRight='style="border-left-color:'+l+";top:0;margin-top:"+(r+g)+'px;"',c.arrowTop='style="border-bottom-color:'+l+";left:0;margin-left:"+(r+g)+'px;"',p.arrowBottom='style="left:0;margin-left:'+(r+g)+'px;"',p.arrowLeft='style="top:0;margin-top:'+(r+g)+'px;"',p.arrowRight='style="top:0;margin-top:'+(r+g)+'px;"',p.arrowTop='style="left:0;margin-left:'+(r+g)+'px;"'):(c.arrowBottom='style="border-top-color:'+l+'"',c.arrowLeft='style="border-right-color:'+l+'"',c.arrowRight='style="border-left-color:'+l+'"',c.arrowTop='style="border-bottom-color:'+l+'"'):null!==r&&(c.arrowBottom=p.arrowBottom='style="left:0;margin-left:'+(r+g)+'px;"',c.arrowLeft=p.arrowLeft='style="top:0;margin-top:'+(r+g)+'px;"',c.arrowRight=p.arrowRight='style="top:0;margin-top:'+(r+g)+'px;"',c.arrowTop=p.arrowTop='style="left:0;margin-left:'+(r+g)+'px;"');var d=c[s]||"",u=p[s]||"";o='<div class="navyTip">'+o+"</div><div "+d+' class="navyTipArrow navyTipArrow1 absolute '+s+'1"></div><div '+u+' class="navyTipArrow navyTipArrow2 absolute '+s+'2"></div>',i.isShowKnowBtn&&(o+='<div class="navyDialogTipBtnContainer"><a href="javascript:;" class="navyDialogBtnClick navyDialogTipKnowBtn">'+i.knowBtnText+"</a></div>");var v=new NAVY.Dialog(o,a);return null!==l&&v.dialogObj.find(".navyDialogContent").css({"border-color":l}),v},NAVY.ToolTip=function(t,o){var i={spaceV:3,spaceH:0,bgColor:"#000",color:"#fff",opacity:.8};$.extend(i.options,o);var e=i.spaceV,a=i.spaceH,n=i.bgColor,s=i.color,l=i.opacity,r="style=color:"+s+";background:"+n+";opacity:"+l+";filter:alpha(opacity="+100*l+")";t=$(t);var c=t.offset().left,p=t.offset().top,g=t.outerWidth(),d=t.outerHeight(),u=null,v=null,h=0,f=0,y=c+g,T=p+d;t.find("[title]").hover(function(){if(u=$(this),v=u.attr("title")){u.attr("title","");var o=u.offset().left+parseInt(u.css("padding-left"))+parseInt(u.css("margin-left")),i=u.offset().top,n=(u.outerWidth(),u.outerHeight());this.toolTipObj=$('<div class="navyToolTipWrapper"><div class="navyToolTip" '+r+">"+v+"</div></div>").appendTo(t);var s=this.toolTipObj.outerWidth()+a,l=this.toolTipObj.outerHeight()+e,C=o+s,w=i+l+n,b=o-c+s-g;b=b>0?c:b;var m=i-p+n+l-d;m=m>0?i-l:m,h=C>y?b:o,f=w>T?m:i+n,this.toolTipObj.offset({left:h+a,top:f+e}),$.browser.msie&&"6.0"==$.browser.version&&this.toolTipObj.css({width:s-a,height:l-e})}},function(){$(this).attr("title",v),this.toolTipObj.remove()})},NAVY.Ajax=function(t,o){t=t||{},o=o||{},o.sendTip=o.sendTip||"数据下载中...",o.errorTip=o.errorTip||"出了点问题，请再试试！",o.okTip=o.okTip||"操作成功了",o.okObj=o.okObj||!1,o.closeSec=o.closeSec||2,t.error=t.error||noop,t.complete=t.complete||noop,t.success=t.success||noop;var i=o.okObj,e={autoCloseSecond:o.closeSec},a=NAVY.Alert(o.sendTip,{type:"loading"});$.ajax({url:t.url||"",type:t.type||"post",data:t.data||{},dataType:t.dataType||"json",beforeSend:t.beforeSend||noop,success:function(n){a.closeDialog(),i&&(n[i.key]==i.val?NAVY.Alert(o.okTip,e):(e.type="warning",NAVY.Alert(o.errorTip,{type:e}))),t.success(n)},complete:function(o){t.success(o)},error:function(i){t.error(i),a.closeDialog(),e.type="error",NAVY.Alert(o.errorTip,e)},timeout:t.timeout})};
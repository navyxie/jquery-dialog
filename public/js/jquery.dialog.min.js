var noop=function(){},NAVY=NAVY||{};NAVY.console=window.console||{log:noop,dir:noop},NAVY.UTIL=NAVY.UTIL||{},NAVY.UTIL.Style=NAVY.UTIL.Style||{},NAVY.UTIL.Style.getMaxZIndex=function(){for(var t=document.getElementsByTagName("*"),o=t.length,a=0,i=1;o>a;a++)i=Math.max(i,t[a].style.zIndex||0);return i},NAVY.UTIL.Style.setMaxZIndex=function(t){t.style.zIndex=1+NAVY.UTIL.Style.getMaxZIndex()},NAVY.Dialog=function(t,o){var a={title:"温馨提示",isShowTiTle:!0,closeText:"X",closeCbf:noop,isShowCloseBtn:!0,isMask:!0,isClickMaskCloseDialog:!1,clickMaskCbf:noop,sureBtnText:"确定",sureBtnCbf:noop,isShowSureBtn:!0,cancelBtnText:"取消",cancelBtnCbf:noop,isShowCancelBtn:!0,target:"body",dialogWidth:null,dialogHeight:null,marginLeft:null,marginTop:null,dialogClass:"",position:"fixed",autoCloseSecond:0,knowBtnCbf:noop,isDrag:!1};this.contentHtml=t||"请填充对话框内容",$.extend(a,o),this.options=a,this.targetObj=$(this.options.target),this.bodyObj=$("body"),this.init()},NAVY.Dialog.prototype={init:function(){return this.showDialog(),this.initEvent(),this},initEvent:function(){var t=this,o=t.options,a=t.dialogObj,i=a.find(".navyDialogTitleContainer").find(".closeDialogBtn");o.isMask&&this.bodyObj.find(".navyMaskWrapper").click(function(){o.isClickMaskCloseDialog&&t.closeDialog(),o.clickMaskCbf()}),a.on("click",".navyDialogBtnClick",function(){var a=$(this);a.hasClass("closeDialogBtn")?(t.closeDialog(),o.closeCbf()):a.hasClass("navySureBtn")?o.sureBtnCbf.apply(t,arguments):a.hasClass("navyCancelBtn")?(t.closeDialog(),o.cancelBtnCbf.apply(t,arguments)):a.hasClass("navyDialogTipKnowBtn")&&(t.closeDialog(),o.knowBtnCbf.apply(t,arguments))});var e=o.autoCloseSecond;if(0!==e){if(i.length){i.html('<span class="leftSecond">'+e+"</span>秒后关闭");var n=i.find(".leftSecond")[0];NAVY.UTIL.Date.countDown(n,e)}var l=setTimeout(function(){t.closeDialog(),l&&clearTimeout(l)},1e3*e)}if(o.isDrag){var s=!1,r={x:0,y:0},g={left:0,top:0};a.find(".navyDialogTitleContainer").css("cursor","move").mousedown(function(t){return s=!0,NAVY.UTIL.Style.setMaxZIndex(a[0]),r.x=t.pageX,r.y=t.pageY,g.left=a.position().left,g.top=a.position().top,!1}),$(document).on("mouseup mousemove",function(t){switch(t.type){case"mouseup":return s=!1,!1;case"mousemove":if(s){var o={x:t.pageX,y:t.pageY},i=o.x-r.x,e=o.y-r.y;if(0===i%2||0===e%2){var n=g.left+i,l=g.top+e;n=0>=n?0:n,l=0>=l?0:l,a.css({left:n,top:l})}}return!1}})}return this},showDialog:function(){var t=NAVY.UTIL.Style,o=t.getMaxZIndex(),a=this,i=a.options,e="";"fixed"!==i.position&&(e="position:absolute");var n=['<div style="z-index: '+(2+o)+";"+e+'" class="navyDialogWrapper '+i.dialogClass+'"><table class="navyDialogTable"><tr><td>'];i.isShowTiTle?i.isShowCloseBtn?n.push('<h2 class="navyDialogTitleContainer relative"><a href="javascript:;" class="navyDialogBtnClick closeDialogBtn floatRight">'+i.closeText+'</a><span class="dialogTitle">'+i.title+"</span></h2>"):n.push('<h2 class="navyDialogTitleContainer relative"><span class="dialogTitle textAlignCenter">'+i.title+"</span></h2>"):i.isShowCloseBtn&&n.push('<h2 class="navyDialogTitleContainer relative"><a href="javascript:;" class="navyDialogBtnClick closeDialogBtn floatRight">'+i.closeText+"</a></h2>"),n.push('<div class="navyDialogContentContainer"><div class="navyDialogContent">'+a.contentHtml+"</div></div>"),i.isShowSureBtn?i.isShowCancelBtn?n.push('<div class="navyDialogBtnContainer"><div class="navyDialogBtnContent"><a href="javascript:;" class="navyDialogBtn navyDialogBtnClick navySureBtn">'+i.sureBtnText+'</a><a href="javascript:;" class="navyDialogBtn navyDialogBtnClick navyCancelBtn">'+i.cancelBtnText+"</a></div></div>"):n.push('<div class="navyDialogBtnContainer"><div class="navyDialogBtnContent"><a href="javascript:;" class="navyDialogBtn navyDialogBtnClick navySureBtn marginCenter">'+i.sureBtnText+"</a></div></div>"):i.isShowCancelBtn&&n.push('<div class="navyDialogBtnContainer"><div class="navyDialogBtnContent"><a href="javascript:;" class="navyDialogBtn navyDialogBtnClick navyCancelBtn marginCenter">'+i.cancelBtnText+"</a></div></div>"),n.push("</td></tr></table></div>"),a.dialogObj=$(n.join("")).appendTo(i.target);var l=a.dialogObj,s=i.dialogWidth||l.outerWidth(),r=i.dialogHeight||l.outerHeight();s=80>s?80:s;var g=s/2,c=r/2,d=i.marginLeft,p=i.marginTop;if(null!==d?null!==p?l.css({width:s,height:r,marginLeft:d,marginTop:p,left:0,top:0,overflow:"hidden"}).find(".navyDialogTable").css({width:s,height:r}):l.css({width:s,height:r,marginLeft:d,marginTop:-c,left:0,overflow:"hidden"}).find(".navyDialogTable").css({width:s,height:r}):null!==p?l.css({width:s,height:r,marginLeft:-g,marginTop:p,top:0,overflow:"hidden"}).find(".navyDialogTable").css({width:s,height:r}):l.css({width:s,height:r,marginLeft:-g,marginTop:-c,overflow:"hidden"}).find(".navyDialogTable").css({width:s,height:r}),i.isMask&&!a.bodyObj.find(".navyMaskWrapper").length){var v=$('<div style="z-index: '+(1+o)+'" class="navyMaskWrapper"></div>').appendTo(a.bodyObj);if($.browser.msie&&"6.0"==$.browser.version){var h,u=$(document),f=$(window),y=h=u.height(),T=f.height();T>=y&&(h=T),v.height(h)}}return this},closeDialog:function(){var t=this,o=t.options;return t.dialogObj.unbind().remove(),o.isMask&&t.bodyObj.find(".navyMaskWrapper").remove(),this}},NAVY.Alert=function(t,o){o=o||{};var a=o.type||"success";o.bgType=o.bgType||0;var i=isNaN(o.bgType)?0:o.bgType,e={"-1":"noCss3Bg",0:"uiCss3BlackGradientBG",1:"uiCss3BlueGradientBG",2:"uiCss3GreyGradientBG",3:"uiCss3LightBlueGradientBG",4:"uiCss3LightSteelBlue",5:"uiCss3RoyalBlueGradientBG",6:"uiGoldenrodGradientBG"},n=e[i]||e["0"],l="successNavyAlert",s=o.dialogClass;switch(s?s+=" navyDialogAlert":s="navyDialogAlert",a){case"error":l="errorNavyAlert";break;case"warning":l="warningNavyAlert";break;case"loading":l="loadingNavyAlert";break;default:l="successNavyAlert"}t='<div class="navyAlert '+n+'"><div class="navyAlertSub '+l+'">'+t+"</div></div>";var r={isShowTiTle:!1,isShowCloseBtn:!1,isShowSureBtn:!1,isShowCancelBtn:!1,isMask:!1,dialogClass:s,autoCloseSecond:o.autoCloseSecond||3,position:o.position||"fixed",target:o.target||"body",dialogWidth:o.dialogWidth||null,dialogHeight:o.dialogHeight||null,marginLeft:o.marginLeft||null,marginTop:o.marginTop||null};return"loading"===a&&(r.autoCloseSecond=0),new NAVY.Dialog(t,r)},NAVY.Tip=function(t,o,a){a=a||{},void 0===a.isShowKnowBtn&&(a.isShowKnowBtn=!0),a.knowBtnText=a.knowBtnText||"知道了";var i=a.dialogClass;i?i+=" navyDialogTip":i="navyDialogTip";var e={isShowTiTle:!1,isShowCloseBtn:!1,isShowSureBtn:!1,isShowCancelBtn:!1,isMask:!1,dialogClass:i,autoCloseSecond:a.autoCloseSecond||0,position:a.position||"absolute",target:t||a.target||"body",knowBtnCbf:a.knowBtnCbf||noop,dialogWidth:a.dialogWidth||null,dialogHeight:a.dialogHeight||null,marginLeft:a.marginLeft||null,marginTop:a.marginTop||null,tipBorderColor:a.tipBorderColor||null,arrowValue:a.arrowValue||null},n=a.direction||"top",l="arrowTop";switch(n){case"bottom":l="arrowBottom";break;case"left":l="arrowLeft";break;case"right":l="arrowRight";break;default:l="arrowTop"}var s=e.tipBorderColor,r=e.arrowValue,g={},c={},d=10;null!==s?null!==r?(g.arrowBottom='style="border-top-color:'+s+";left:0;margin-left:"+(r+d)+'px;"',g.arrowLeft='style="border-right-color:'+s+";top:0;margin-top:"+(r+d)+'px;"',g.arrowRight='style="border-left-color:'+s+";top:0;margin-top:"+(r+d)+'px;"',g.arrowTop='style="border-bottom-color:'+s+";left:0;margin-left:"+(r+d)+'px;"',c.arrowBottom='style="left:0;margin-left:'+(r+d)+'px;"',c.arrowLeft='style="top:0;margin-top:'+(r+d)+'px;"',c.arrowRight='style="top:0;margin-top:'+(r+d)+'px;"',c.arrowTop='style="left:0;margin-left:'+(r+d)+'px;"'):(g.arrowBottom='style="border-top-color:'+s+'"',g.arrowLeft='style="border-right-color:'+s+'"',g.arrowRight='style="border-left-color:'+s+'"',g.arrowTop='style="border-bottom-color:'+s+'"'):null!==r&&(g.arrowBottom=c.arrowBottom='style="left:0;margin-left:'+(r+d)+'px;"',g.arrowLeft=c.arrowLeft='style="top:0;margin-top:'+(r+d)+'px;"',g.arrowRight=c.arrowRight='style="top:0;margin-top:'+(r+d)+'px;"',g.arrowTop=c.arrowTop='style="left:0;margin-left:'+(r+d)+'px;"');var p=g[l]||"",v=c[l]||"";o='<div class="navyTip">'+o+"</div><div "+p+' class="navyTipArrow navyTipArrow1 absolute '+l+'1"></div><div '+v+' class="navyTipArrow navyTipArrow2 absolute '+l+'2"></div>',a.isShowKnowBtn&&(o+='<div class="navyDialogTipBtnContainer"><a href="javascript:;" class="navyDialogBtnClick navyDialogTipKnowBtn">'+a.knowBtnText+"</a></div>");var h=new NAVY.Dialog(o,e);return null!==s&&h.dialogObj.find(".navyDialogContent").css({"border-color":s}),h},NAVY.ToolTip=function(t,o){var a={spaceV:3,spaceH:0,bgColor:"#000",color:"#fff",opacity:.8};$.extend(a.options,o);var i=a.spaceV,e=a.spaceH,n=a.bgColor,l=a.color,s=a.opacity,r="style=color:"+l+";background:"+n+";opacity:"+s+";filter:alpha(opacity="+100*s+")";t=$(t);var g=t.offset().left,c=t.offset().top,d=t.outerWidth(),p=t.outerHeight(),v=null,h=null,u=0,f=0,y=g+d,T=c+p;t.find("[title]").hover(function(){if(v=$(this),h=v.attr("title")){v.attr("title","");var o=v.offset().left+parseInt(v.css("padding-left"))+parseInt(v.css("margin-left")),a=v.offset().top,n=(v.outerWidth(),v.outerHeight());this.toolTipObj=$('<div class="navyToolTipWrapper"><div class="navyToolTip" '+r+">"+h+"</div></div>").appendTo(t);var l=this.toolTipObj.outerWidth()+e,s=this.toolTipObj.outerHeight()+i,w=o+l,B=a+s+n,C=o-g+l-d;C=C>0?g:C;var b=a-c+n+s-p;b=b>0?a-s:b,u=w>y?C:o,f=B>T?b:a+n,this.toolTipObj.offset({left:u+e,top:f+i}),$.browser.msie&&"6.0"==$.browser.version&&this.toolTipObj.css({width:l-e,height:s-i})}},function(){$(this).attr("title",h),this.toolTipObj.remove()})},NAVY.Ajax=function(t,o){t=t||{},o=o||{},o.sendTip=o.sendTip||"数据下载中...",o.errorTip=o.errorTip||"出了点问题，请再试试！",o.okTip=o.okTip||"操作成功了",o.okObj=o.okObj||!1,t.error=t.error||noop,t.complete=t.complete||noop,t.success=t.success||noop;var a=o.okObj,i=NAVY.Alert(o.sendTip,{type:"loading"});$.ajax({url:t.url||"",type:t.type||"post",dataType:t.dataType||"json",beforeSend:t.beforeSend||noop,success:function(e){i.closeDialog(),a&&(e[a.key]==a.val?NAVY.Alert(o.okTip):NAVY.Alert(o.errorTip,{type:"warning"})),t.success(e)},complete:function(o){t.success(o)},error:function(a){t.error(a),i.closeDialog(),NAVY.Alert(o.errorTip,"error")},timeout:t.timeout})};